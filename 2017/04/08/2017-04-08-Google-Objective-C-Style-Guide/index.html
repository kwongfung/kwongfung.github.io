<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Objective-C," />





  <link rel="alternate" href="/atom.xml" title="Guangfeng's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="This is Google Objective-C Style Guide.
BackgroundObjective-C is a very dynamic, object-oriented extension of C. It’s designed to be easy to use and read, while enabling sophisticated object-oriented">
<meta property="og:type" content="article">
<meta property="og:title" content="Google Objective-C Style Guide">
<meta property="og:url" content="http://yoursite.com/2017/04/08/2017-04-08-Google-Objective-C-Style-Guide/index.html">
<meta property="og:site_name" content="Guangfeng's Blog">
<meta property="og:description" content="This is Google Objective-C Style Guide.
BackgroundObjective-C is a very dynamic, object-oriented extension of C. It’s designed to be easy to use and read, while enabling sophisticated object-oriented">
<meta property="og:updated_time" content="2017-04-08T17:23:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Google Objective-C Style Guide">
<meta name="twitter:description" content="This is Google Objective-C Style Guide.
BackgroundObjective-C is a very dynamic, object-oriented extension of C. It’s designed to be easy to use and read, while enabling sophisticated object-oriented">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/04/08/2017-04-08-Google-Objective-C-Style-Guide/"/>





  <title> Google Objective-C Style Guide | Guangfeng's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?112d3c8ad52be5be59465d08997a5933";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Guangfeng's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocapitalize="off" autocomplete="off" autocorrect="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/08/2017-04-08-Google-Objective-C-Style-Guide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Guangfeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Guangfeng's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Google Objective-C Style Guide
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-08T23:16:09+08:00">
                2017-04-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>This is <a href="https://google.github.io/styleguide/objcguide.xml" target="_blank" rel="external">Google Objective-C Style Guide</a>.</strong></p>
<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>Objective-C is a very dynamic, object-oriented extension of C. It’s designed to be easy to use and read, while enabling sophisticated object-oriented design. It is the primary development language for new applications on Mac OS X and the iPhone.<br>Cocoa is one of the main application frameworks on Mac OS X. It is a collection of Objective-C classes that provide for rapid development of full-featured Mac OS X applications.<br>Apple has already written a very good, and widely accepted, coding guide for Objective-C. Google has also written a similar guide for C++. This Objective-C guide aims to be a very natural combination of Apple’s and Google’s general recommendations. So, before reading this guide, please make sure you’ve read:</p>
<ul>
<li><a href="https://developer.apple.com/documentation/Cocoa/Conceptual/CodingGuidelines/index.html" target="_blank" rel="external">Apple’s Cocoa Coding Guidelines</a></li>
<li><a href="https://google-styleguide.googlecode.com/svn/trunk/cppguide.xml" target="_blank" rel="external">Google’s Open Source C ++ Style Guide</a></li>
</ul>
<p>The purpose of this document is to describe the Objective-C (and Objective-C++) coding guidelines and practices that should be used for all Mac OS X code. Many of these guidelines have evolved and been proven over time on other projects and teams. Open-source projects developed by Google conform to the requirements in this guide.<br>Note that this guide is not an Objective-C tutorial. We assume that the reader is familiar with the language. If you are new to Objective-C or need a refresher, please read <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/Introduction/Introduction.html" title="Programming with Objective-C" target="_blank" rel="external">Programming with Objective-C </a> .</p>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>They say an example is worth a thousand words so let’s start off with an example that should give you a feel for the style, spacing, naming, etc.<br>An example header file, demonstrating the correct commenting and spacing for an <code>@interface</code> declaration</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"Foo.h"</span></span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  <span class="built_in">NSString</span> *_bar;</div><div class="line">  <span class="built_in">NSString</span> *_foo;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="keyword">instancetype</span>)fooWithBar:(<span class="built_in">NSString</span> *)bar &#123;</div><div class="line">  <span class="keyword">return</span> [[[<span class="keyword">self</span> alloc] initWithBar:bar] autorelease];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Must always override super's designated initializer.</span></div><div class="line">- (<span class="keyword">instancetype</span>)init &#123;</div><div class="line">  <span class="keyword">return</span> [<span class="keyword">self</span> initWithBar:<span class="literal">nil</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">instancetype</span>)initWithBar:(<span class="built_in">NSString</span> *)bar &#123;</div><div class="line">  <span class="keyword">if</span> ((<span class="keyword">self</span> = [<span class="keyword">super</span> init])) &#123;</div><div class="line">    _bar = [bar <span class="keyword">copy</span>];</div><div class="line">    _bam = [[<span class="built_in">NSString</span> alloc] initWithFormat:<span class="string">@"hi %d"</span>, <span class="number">3</span>];</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)dealloc &#123;</div><div class="line">  [_bar release];</div><div class="line">  [_bam release];</div><div class="line">  [<span class="keyword">super</span> dealloc];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">NSString</span> *)bar &#123;</div><div class="line">  <span class="keyword">return</span> _bar;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setBar:(<span class="built_in">NSString</span> *)bar &#123;</div><div class="line">  [_bar autorelease];</div><div class="line">  _bar = [bar <span class="keyword">copy</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">BOOL</span>)doWorkWithBlah:(<span class="built_in">NSString</span> *)blah &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>An example source file, demonstrating the correct commenting and spacing for the <code>@implementation</code> of an interface. It also includes the reference implementations for important methods like getters and setters,<code>init</code>, and <code>dealloc</code>.</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"Foo.h"</span></span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  <span class="built_in">NSString</span> *_bar;</div><div class="line">  <span class="built_in">NSString</span> *_foo;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (<span class="keyword">instancetype</span>)fooWithBar:(<span class="built_in">NSString</span> *)bar &#123;</div><div class="line">  <span class="keyword">return</span> [[[<span class="keyword">self</span> alloc] initWithBar:bar] autorelease];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Must always override super's designated initializer.</span></div><div class="line">- (<span class="keyword">instancetype</span>)init &#123;</div><div class="line">  <span class="keyword">return</span> [<span class="keyword">self</span> initWithBar:<span class="literal">nil</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">instancetype</span>)initWithBar:(<span class="built_in">NSString</span> *)bar &#123;</div><div class="line">  <span class="keyword">if</span> ((<span class="keyword">self</span> = [<span class="keyword">super</span> init])) &#123;</div><div class="line">    _bar = [bar <span class="keyword">copy</span>];</div><div class="line">    _bam = [[<span class="built_in">NSString</span> alloc] initWithFormat:<span class="string">@"hi %d"</span>, <span class="number">3</span>];</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)dealloc &#123;</div><div class="line">  [_bar release];</div><div class="line">  [_bam release];</div><div class="line">  [<span class="keyword">super</span> dealloc];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">NSString</span> *)bar &#123;</div><div class="line">  <span class="keyword">return</span> _bar;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)setBar:(<span class="built_in">NSString</span> *)bar &#123;</div><div class="line">  [_bar autorelease];</div><div class="line">  _bar = [bar <span class="keyword">copy</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">BOOL</span>)doWorkWithBlah:(<span class="built_in">NSString</span> *)blah &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>Blank lines before and after <code>@interface</code>, <code>@implementation</code>, and <code>@end</code> are optional. If your <code>@interface</code> declares instance variables, a blank line should come after the closing brace (}).</p>
<p>Unless an interface or implementation is very short, such as when declaring a handful of private methods or a bridge class, adding blank lines usually helps readability.</p>
<h2 id="Spacing-And-Formatting"><a href="#Spacing-And-Formatting" class="headerlink" title="Spacing And Formatting"></a>Spacing And Formatting</h2><h3 id="Spaces-vs-Tabs"><a href="#Spaces-vs-Tabs" class="headerlink" title="Spaces vs. Tabs"></a>Spaces vs. Tabs</h3><p>Use only spaces, and indent 2 spaces at a time.<br>We use spaces for indentation. Do not use tabs in your code. You should set your editor to emit spaces when you hit the tab key.</p>
<h3 id="Line-Length"><a href="#Line-Length" class="headerlink" title="Line Length"></a>Line Length</h3><p>The maximum line length for Objective-C and Objective-C++ files is 100 columns. Projects may opt to use an 80 column limit for consistency with the C++ style guide.<br>You can make violations easier to spot by enabling Preferences > Text Editing > Page guide at column: 100 in Xcode.</p>
<h3 id="Method-Declarations-and-Definitions"><a href="#Method-Declarations-and-Definitions" class="headerlink" title="Method Declarations and Definitions"></a>Method Declarations and Definitions</h3><p>One space should be used between the - or + and the return type, and no spacing in the parameter list except between parameters.<br>Methods should look like this:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)doSomethingWithString:(<span class="built_in">NSString</span> *)theString &#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>The spacing before the asterisk is optional. When adding new code, be consistent with the surrounding file’s style.<br>If you have too many parameters to fit on one line, giving each its own line is preferred. If multiple lines are used, align each using the colon before the parameter.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)doSomethingWith:(GTMFoo *)theFoo</div><div class="line">                   rect:(<span class="built_in">NSRect</span>)theRect</div><div class="line">               interval:(<span class="keyword">float</span>)theInterval &#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>When the first keyword is shorter than the others, indent the later lines by at least four spaces, maintaining colon alignment:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)<span class="keyword">short</span>:(GTMFoo *)theFoo</div><div class="line">          longKeyword:(<span class="built_in">NSRect</span>)theRect</div><div class="line">    evenLongerKeyword:(<span class="keyword">float</span>)theInterval</div><div class="line">                error:(<span class="built_in">NSError</span> **)theError &#123;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Method-Invocations"><a href="#Method-Invocations" class="headerlink" title="Method Invocations"></a>Method Invocations</h3><p>Method invocations should be formatted much like method declarations. When there’s a choice of formatting styles, follow the convention already used in a given source file.<br>Invocations should have all arguments on one line:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[myObject doFooWith:arg1 name:arg2 error:arg3];</div></pre></td></tr></table></figure></p>
<p>or have one argument per line, with colons aligned:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[myObject doFooWith:arg1</div><div class="line">               name:arg2</div><div class="line">              error:arg3];</div></pre></td></tr></table></figure></p>
<p>Don’t use any of these styles:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[myObject doFooWith:arg1 name:arg2  <span class="comment">// some lines with &gt;1 arg</span></div><div class="line">              error:arg3];</div><div class="line"></div><div class="line">[myObject doFooWith:arg1</div><div class="line">               name:arg2 error:arg3];</div><div class="line"></div><div class="line">[myObject doFooWith:arg1</div><div class="line">          name:arg2  <span class="comment">// aligning keywords instead of colons</span></div><div class="line">          error:arg3];</div></pre></td></tr></table></figure></p>
<p>As with declarations and definitions, when the first keyword is shorter than the others, indent the later lines by at least four spaces, maintaining colon alignment:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[myObj <span class="keyword">short</span>:arg1</div><div class="line">          longKeyword:arg2</div><div class="line">    evenLongerKeyword:arg3</div><div class="line">                error:arg4];</div></pre></td></tr></table></figure></p>
<p>Invocations containing inlined blocks may have their segments left-aligned at a four space indent.</p>
<h3 id="public-and-private"><a href="#public-and-private" class="headerlink" title="@public and @private"></a>@public and @private</h3><p>The <code>@public</code> and<code>@private</code> access modifiers should be indented by 1 space.<br>This is similar to <code>public</code>, <code>private</code>, and <code>protected</code> in C++.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyClass</span> : <span class="title">NSObject</span> </span>&#123;</div><div class="line"> <span class="keyword">@public</span></div><div class="line">  ...</div><div class="line"> <span class="keyword">@private</span></div><div class="line">  ...</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h3 id="Exceptions"><a href="#Exceptions" class="headerlink" title="Exceptions"></a>Exceptions</h3><p>Format exceptions with each @ label on its own line and a space between the @ label and the opening brace ({), as well as between the @catch and the caught object declaration.<br>If you must use Obj-C exceptions, format them as follows. However, see Avoid Throwing Exceptions for reasons why you should not be using exceptions.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@try</span> &#123;</div><div class="line">  foo();</div><div class="line">&#125;</div><div class="line"><span class="keyword">@catch</span> (<span class="built_in">NSException</span> *ex) &#123;</div><div class="line">  bar(ex);</div><div class="line">&#125;</div><div class="line"><span class="keyword">@finally</span> &#123;</div><div class="line">  baz();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Protocols"><a href="#Protocols" class="headerlink" title="Protocols"></a>Protocols</h3><p>There should not be a space between the type identifier and the name of the protocol encased in angle brackets.<br>This applies to class declarations, instance variables, and method declarations. For example:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyProtocoledClass</span> : <span class="title">NSObject</span>&lt;<span class="title">NSWindowDelegate</span>&gt; </span>&#123;</div><div class="line"> <span class="keyword">@private</span></div><div class="line">  <span class="keyword">id</span>&lt;MyFancyDelegate&gt; _delegate;</div><div class="line">&#125;</div><div class="line">- (<span class="keyword">void</span>)setDelegate:(<span class="keyword">id</span>&lt;MyFancyDelegate&gt;)aDelegate;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h3 id="Blocks"><a href="#Blocks" class="headerlink" title="Blocks"></a>Blocks</h3><p>Code inside blocks should be indented four spaces.<br>There are several appropriate style rules, depending on how long the block is:</p>
<ul>
<li>If the block can fit on one line, no wrapping is necessary.</li>
<li>If it has to wrap, the closing brace should line up with the first character of the line on which the block is declared.</li>
<li>Code within the block should be indented four spaces.</li>
<li>If the block is large, e.g. more than 20 lines, it is recommended to move it out-of-line into a local variable.</li>
<li>If the block takes no parameters, there are no spaces between the characters ^{. If the block takes parameters, there is no space between the ^( characters, but there is one space between the ) { characters.</li>
<li>Invocations containing inlined blocks may have their segments left-aligned at a four-space indent. This helps when invocations contain multiple inlined blocks.</li>
<li>Two space indents inside blocks are also allowed, but should only be used when it’s consistent with the rest of the project’s code.<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// The entire block fits on one line.</span></div><div class="line">[operation setCompletionBlock:^&#123; [<span class="keyword">self</span> onOperationDone]; &#125;];</div><div class="line"></div><div class="line"><span class="comment">// The block can be put on a new line, indented four spaces, with the</span></div><div class="line"><span class="comment">// closing brace aligned with the first character of the line on which</span></div><div class="line"><span class="comment">// block was declared.</span></div><div class="line">[operation setCompletionBlock:^&#123;</div><div class="line">    [<span class="keyword">self</span>.delegate newDataAvailable];</div><div class="line">&#125;];</div><div class="line"></div><div class="line"><span class="comment">// Using a block with a C API follows the same alignment and spacing</span></div><div class="line"><span class="comment">// rules as with Objective-C.</span></div><div class="line"><span class="built_in">dispatch_async</span>(_fileIOQueue, ^&#123;</div><div class="line">    <span class="built_in">NSString</span>* path = [<span class="keyword">self</span> sessionFilePath];</div><div class="line">    <span class="keyword">if</span> (path) &#123;</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// An example where the parameter wraps and the block declaration fits</span></div><div class="line"><span class="comment">// on the same line. Note the spacing of |^(SessionWindow *window) &#123;|</span></div><div class="line"><span class="comment">// compared to |^&#123;| above.</span></div><div class="line">[[SessionService sharedService]</div><div class="line">    loadWindowWithCompletionBlock:^(SessionWindow *window) &#123;</div><div class="line">        <span class="keyword">if</span> (window) &#123;</div><div class="line">          [<span class="keyword">self</span> windowDidLoad:window];</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">          [<span class="keyword">self</span> errorLoadingWindow];</div><div class="line">        &#125;</div><div class="line">    &#125;];</div><div class="line"></div><div class="line"><span class="comment">// An example where the parameter wraps and the block declaration does</span></div><div class="line"><span class="comment">// not fit on the same line as the name.</span></div><div class="line">[[SessionService sharedService]</div><div class="line">    loadWindowWithCompletionBlock:</div><div class="line">        ^(SessionWindow *window) &#123;</div><div class="line">            <span class="keyword">if</span> (window) &#123;</div><div class="line">              [<span class="keyword">self</span> windowDidLoad:window];</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">              [<span class="keyword">self</span> errorLoadingWindow];</div><div class="line">            &#125;</div><div class="line">        &#125;];</div><div class="line"></div><div class="line"><span class="comment">// Large blocks can be declared out-of-line.</span></div><div class="line"><span class="keyword">void</span> (^largeBlock)(<span class="keyword">void</span>) = ^&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;;</div><div class="line">[_operationQueue addOperationWithBlock:largeBlock];</div><div class="line"></div><div class="line"><span class="comment">// An example with multiple inlined blocks in one invocation.</span></div><div class="line">[myObject doSomethingWith:arg1</div><div class="line">    firstBlock:^(Foo *a) &#123;</div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125;</div><div class="line">    secondBlock:^(Bar *b) &#123;</div><div class="line">        <span class="comment">// ...</span></div><div class="line">    &#125;];</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Container-Literals"><a href="#Container-Literals" class="headerlink" title="Container Literals"></a>Container Literals</h3><p>For projects using Xcode 4.4 or later and clang, the use of container (array and dictionary) literals is encouraged. If split across multiple lines, the contents should be indented two spaces.<br>If the collection fits on one line, put a single space after the opening and before the closing brackets.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span>* array = @[ [foo description], <span class="string">@"Another String"</span>, [bar description] ];</div><div class="line"></div><div class="line"><span class="built_in">NSDictionary</span>* dict = @&#123; <span class="built_in">NSForegroundColorAttributeName</span> : [<span class="built_in">NSColor</span> redColor] &#125;;</div></pre></td></tr></table></figure></p>
<p>Not:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span>* array = @[[foo description], [bar description]];</div><div class="line"></div><div class="line"><span class="built_in">NSDictionary</span>* dict = @&#123;<span class="built_in">NSForegroundColorAttributeName</span>: [<span class="built_in">NSColor</span> redColor]&#125;;</div></pre></td></tr></table></figure></p>
<p>If the collection spans more than a single line, place the opening bracket on the same line as the declaration, indent the body by two spaces, and place the closing bracket on a new line that is indented to the same level as the opening bracket.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span>* array = @[</div><div class="line">  <span class="string">@"This"</span>,</div><div class="line">  <span class="string">@"is"</span>,</div><div class="line">  <span class="string">@"an"</span>,</div><div class="line">  <span class="string">@"array"</span></div><div class="line">];</div><div class="line"></div><div class="line"><span class="built_in">NSDictionary</span>* dictionary = @&#123;</div><div class="line">  <span class="built_in">NSFontAttributeName</span> : [<span class="built_in">NSFont</span> fontWithName:<span class="string">@"Helvetica-Bold"</span> size:<span class="number">12</span>],</div><div class="line">  <span class="built_in">NSForegroundColorAttributeName</span> : fontColor</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>For dictionary literals, there should be one space before the colon and at least one space after it (to optionally align the values).<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSDictionary</span>* option1 = @&#123;</div><div class="line">  <span class="built_in">NSFontAttributeName</span> : [<span class="built_in">NSFont</span> fontWithName:<span class="string">@"Helvetica-Bold"</span> size:<span class="number">12</span>],</div><div class="line">  <span class="built_in">NSForegroundColorAttributeName</span> : fontColor</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">NSDictionary</span>* option2 = @&#123;</div><div class="line">  <span class="built_in">NSFontAttributeName</span> :            [<span class="built_in">NSFont</span> fontWithName:<span class="string">@"Arial"</span> size:<span class="number">12</span>],</div><div class="line">  <span class="built_in">NSForegroundColorAttributeName</span> : fontColor</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>The following are all incorrect:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// There should be a space before the colon.</span></div><div class="line"><span class="built_in">NSDictionary</span>* wrong = @&#123;</div><div class="line">  AKey:       <span class="string">@"b"</span>,</div><div class="line">  BLongerKey: <span class="string">@"c"</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// The items should each be on a new line, or the entire expression</span></div><div class="line"><span class="comment">// should fit on one line.</span></div><div class="line"><span class="built_in">NSDictionary</span>* alsoWrong= @&#123; AKey : <span class="string">@"a"</span>,</div><div class="line">                            BLongerKey : <span class="string">@"b"</span> &#125;;</div><div class="line"></div><div class="line"><span class="comment">// There should be no variable space before the colon, only after.</span></div><div class="line"><span class="built_in">NSDictionary</span>* stillWrong = @&#123;</div><div class="line">  AKey       : <span class="string">@"b"</span>,</div><div class="line">  BLongerKey : <span class="string">@"c"</span>,</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2 id="Naming"><a href="#Naming" class="headerlink" title="Naming"></a>Naming</h2><p>Naming rules are very important in maintainable code. Objective-C method names tend to be very long, but this has the benefit that a block of code can almost read like prose, thus rendering many comments unnecessary.<br>When writing pure Objective-C code, we mostly follow standard Objective-C naming rules. These naming guidelines may differ significantly from those outlined in the C++ style guide. For example, Google’s C++ style guide recommends the use of underscores between words in variable names, whereas this guide recommends the use of intercaps, which is standard in the Objective-C community.<br>Any class, category, method, or variable name may use all capitals for initialisms within the name. This follows Apple’s standard of using all capitals within a name for initialisms such as URL, TIFF, and EXIF.<br>When writing Objective-C++, however, things are not so cut and dry. Many projects need to implement cross-platform C++ APIs with some Objective-C or Cocoa, or bridge between a C++ back-end and a native Cocoa front-end. This leads to situations where the two guides are directly at odds.<br>Our solution is that the style follows that of the method/function being implemented. If you’re in an @implementation block, use the Objective-C naming rules. If you’re implementing a method for a C++ class, use the C++ naming rules. This avoids the situation where instance variable and local variable naming rules are mixed within a single function, which would be a serious detriment to readability.</p>
<h3 id="File-Names"><a href="#File-Names" class="headerlink" title="File Names"></a>File Names</h3><p>File names should reflect the name of the class implementation that they contain—including case. Follow the convention that your project uses.<br>File extensions should be as follows:</p>
<p>| .h | C/C++/Objective-C header file |<br>| .m | Objective-C implementation file |<br>| .mm | Objective-C++ implementation file |<br>| .cc | Pure C++ implementation file |<br>| .c | C implementation file |</p>
<p>File names for categories should include the name of the class being extended, e.g. <code>GTMNSString+Utils.h</code> or <code>GTMNSTextView+Autocomplete.h</code></p>
<h3 id="Objective-C"><a href="#Objective-C" class="headerlink" title="Objective-C++"></a>Objective-C++</h3><p>Within a source file, Objective-C++ follows the style of the function/method you’re implementing.<br>In order to minimize clashes between the differing naming styles when mixing Cocoa/Objective-C and C++, follow the style of the method being implemented. If you’re in an @implementation block, use the Objective-C naming rules. If you’re implementing a method for a C++ class, use the C++ naming rules.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// file: cross_platform_header.h</span></div><div class="line"></div><div class="line"><span class="keyword">class</span> CrossPlatformAPI &#123;</div><div class="line"> public:</div><div class="line">  ...</div><div class="line">  <span class="keyword">int</span> DoSomethingPlatformSpecific();  <span class="comment">// impl on each platform</span></div><div class="line"> private:</div><div class="line">  <span class="keyword">int</span> an_instance_var_;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">// file: mac_implementation.mm</span></div><div class="line"><span class="meta">#include <span class="meta-string">"cross_platform_header.h"</span></span></div><div class="line"></div><div class="line"><span class="comment">// A typical Objective-C class, using Objective-C naming.</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyDelegate</span> : <span class="title">NSObject</span> </span>&#123;</div><div class="line"> <span class="keyword">@private</span></div><div class="line">  <span class="keyword">int</span> _instanceVar;</div><div class="line">  CrossPlatformAPI* _backEndObject;</div><div class="line">&#125;</div><div class="line">- (<span class="keyword">void</span>)respondToSomething:(<span class="keyword">id</span>)something;</div><div class="line"><span class="keyword">@end</span></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MyDelegate</span></span></div><div class="line">- (<span class="keyword">void</span>)respondToSomething:(<span class="keyword">id</span>)something &#123;</div><div class="line">  <span class="comment">// bridge from Cocoa through our C++ backend</span></div><div class="line">  _instanceVar = _backEndObject-&gt;DoSomethingPlatformSpecific();</div><div class="line">  <span class="built_in">NSString</span>* tempString = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%d"</span>, _instanceVar];</div><div class="line">  <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, tempString);</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="comment">// The platform-specific implementation of the C++ class, using</span></div><div class="line"><span class="comment">// C++ naming.</span></div><div class="line"><span class="keyword">int</span> CrossPlatformAPI::DoSomethingPlatformSpecific() &#123;</div><div class="line">  <span class="built_in">NSString</span>* temp_string = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%d"</span>, an_instance_var_];</div><div class="line">  <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, temp_string);</div><div class="line">  <span class="keyword">return</span> [temp_string intValue];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Class-Names"><a href="#Class-Names" class="headerlink" title="Class Names"></a>Class Names</h3><p>Class names (along with category and protocol names) should start as uppercase and use mixed case to delimit words.<br>When designing code to be shared across multiple applications, prefixes are acceptable and recommended (e.g. <code>GTMSendMessage</code>). Prefixes are also recommended for classes of large applications that depend on external libraries.</p>
<h3 id="Category-Names"><a href="#Category-Names" class="headerlink" title="Category Names"></a>Category Names</h3><p>Category names should start with a 2 or 3 character prefix identifying the category as part of a project or open for general use. The category name should incorporate the name of the class it’s extending.<br>For example, if we want to create a category on NSString for parsing, we would put the category in a file named <code>GTMNSString+Parsing.h</code>, and the category itself would be named <code>GTMStringParsingAdditions</code> (yes, we know the file name and the category name do not match, but this file could have many separate categories related to parsing). Methods in that category should share the prefix (<code>gtm_myCategoryMethodOnAString:</code>) in order to prevent collisions in Objective-C which only has a single namespace. If the code isn’t meant to be shared and/or doesn’t run in a different address-space, the method naming isn’t quite as important.<br>There should be a single space between the class name and the opening parenthesis of the category.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Extending a framework class:</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">NSString</span> (<span class="title">GTMStringParsingAdditions</span>)</span></div><div class="line">- (<span class="built_in">NSString</span> *)gtm_foobarString;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="comment">// Making your methods and properties private:</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">FoobarViewController</span> ()</span></div><div class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">retain</span>) <span class="built_in">NSView</span> *dongleView;</div><div class="line">- (<span class="keyword">void</span>)performLayout;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h3 id="Objective-C-Method-Names"><a href="#Objective-C-Method-Names" class="headerlink" title="Objective-C Method Names"></a>Objective-C Method Names</h3><p>Method names should start as lowercase and then use mixed case. Each named parameter should also start as lowercase.<br>The method name should read like a sentence if possible, meaning you should choose parameter names that flow with the method name. (e.g. <code>convertPoint:fromRect:</code>or <code>replaceCharactersInRange:withString:</code>). See <a href="https://developer.apple.com/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-BCIGIJJF" target="_blank" rel="external">Apple’s Guide to Naming Methods</a> for more details.<br>Accessor methods should be named the same as the variable they’re “getting”, but they should not be prefixed with the word “get”. For example:<br><code>- (id)getDelegate;  // AVOID</code><br><code>- (id)delegate;    // GOOD</code><br>This is for Objective-C methods only. C++ method names and functions continue to follow the rules set in the C++ style guide.</p>
<h3 id="Variable-Names"><a href="#Variable-Names" class="headerlink" title="Variable Names"></a>Variable Names</h3><p>Variables names start with a lowercase and use mixed case to delimit words. Instance variables have leading underscores. For example: <code>myLocalVariable</code>, <code>_myInstanceVariable</code>.</p>
<h4 id="Common-Variable-Names"><a href="#Common-Variable-Names" class="headerlink" title="Common Variable Names"></a>Common Variable Names</h4><p>Do not use Hungarian notation for syntactic attributes, such as the static type of a variable (int or pointer). Give as descriptive a name as possible, within reason. Don’t worry about saving horizontal space as it is far more important to make your code immediately understandable by a new reader. For example:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> w;</div><div class="line"><span class="keyword">int</span> nerr;</div><div class="line"><span class="keyword">int</span> nCompConns;</div><div class="line">tix = [[<span class="built_in">NSMutableArray</span> alloc] init];</div><div class="line">obj = [someObject object];</div><div class="line">p = [network port];</div></pre></td></tr></table></figure></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> numErrors;</div><div class="line"><span class="keyword">int</span> numCompletedConnections;</div><div class="line">tickets = [[<span class="built_in">NSMutableArray</span> alloc] init];</div><div class="line">userInfo = [someObject object];</div><div class="line">port = [network port];</div></pre></td></tr></table></figure>
<h4 id="Instance-Variables"><a href="#Instance-Variables" class="headerlink" title="Instance Variables"></a>Instance Variables</h4><p>Instance variables are mixed case and should be prefixed with an underscore e.g. <code>_usernameTextField</code>. Note that historically the convention was to put the underscore at the end of the name, and projects may opt to continue using trailing underscores in new code in order to maintain consistency within their codebase (see the Historical Notes section). It is recommended you leave old code as-is, unless doing so would create inconsistency within a class.</p>
<h4 id="Constants"><a href="#Constants" class="headerlink" title="Constants"></a>Constants</h4><p>Constant names (#defines, enums, const local variables, etc.) should start with a lowercase k and then use mixed case to delimit words. For example:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> kNumberOfFiles = <span class="number">12</span>;</div><div class="line"><span class="built_in">NSString</span> *<span class="keyword">const</span> kUserKey = <span class="string">@"kUserKey"</span>;</div><div class="line"><span class="keyword">enum</span> DisplayTinge &#123;</div><div class="line">  kDisplayTingeGreen = <span class="number">1</span>,</div><div class="line">  kDisplayTingeBlue = <span class="number">2</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>Because Objective-C does not provide namespacing, constants with global scope should have an appropriate prefix to minimize the chance of name collision, typically like <code>kClassNameFoo</code>.</p>
<h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p>Though a pain to write, they are absolutely vital to keeping our code readable. The following rules describe what you should comment and where. But remember: while comments are very important, the best code is self-documenting. Giving sensible names to types and variables is much better than using obscure names and then trying to explain them through comments.<br>When writing your comments, write for your audience: the next contributor who will need to understand your code. Be generous—the next one may be you!<br>Remember that all of the rules and conventions listed in the C++ Style Guide are in effect here, with a few additional points, below.</p>
<h3 id="File-Comments"><a href="#File-Comments" class="headerlink" title="File Comments"></a>File Comments</h3><p>A file may optionally start with a description of its contents.<br>Every file should contain the following items, in order:</p>
<ul>
<li>license boilerplate if neccessary. Choose the appropriate boilerplate for the license used by the project (e.g. Apache 2.0, BSD, LGPL, GPL).</li>
<li>a basic description of the contents of the file if necessary.</li>
</ul>
<p>If you make significant changes to a file with an author line, consider deleting the author line since revision history already provides a more detailed and accurate record of authorship.</p>
<h3 id="Declaration-Comments"><a href="#Declaration-Comments" class="headerlink" title="Declaration Comments"></a>Declaration Comments</h3><p>Every interface, category, and protocol declaration should have an accompanying comment describing its purpose and how it fits into the larger picture.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// A delegate for NSApplication to handle notifications about app</span></div><div class="line"><span class="comment">// launch and shutdown. Owned by the main app controller.</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyAppDelegate</span> : <span class="title">NSObject</span> </span>&#123;</div><div class="line">  ...</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p>If you have already described an interface in detail in the comments at the top of your file feel free to simply state “See comment at top of file for a complete description”, but be sure to have some sort of comment.<br>Additionally, each method in the public interface should have a comment explaining its function, arguments, return value, and any side effects.<br>Document the synchronization assumptions the class makes, if any. If an instance of the class can be accessed by multiple threads, take extra care to document the rules and invariants surrounding multithreaded use.</p>
<h3 id="Implementation-Comments"><a href="#Implementation-Comments" class="headerlink" title="Implementation Comments"></a>Implementation Comments</h3><p>Use vertical bars to quote variable names and symbols in comments rather than quotes or naming the symbol inline.<br>This helps eliminate ambiguity, especially when the symbol is a common word that might make the sentence read like it was poorly constructed. E.g. for a symbol “count”:<br><code>// Sometimes we need |count| to be less than zero.</code><br>or when quoting something which already contains quotes<br><code>// Remember to call |StringWithoutSpaces(&quot;foo bar baz&quot;)|</code></p>
<h3 id="Object-Ownership"><a href="#Object-Ownership" class="headerlink" title="Object Ownership"></a>Object Ownership</h3><p>Make the pointer ownership model as explicit as possible when it falls outside the most common Objective-C usage idioms.</p>
<h4 id="Manual-Reference-Counting"><a href="#Manual-Reference-Counting" class="headerlink" title="Manual Reference Counting"></a>Manual Reference Counting</h4><p>Instance variables which are pointers to objects derived from NSObject are presumed to be retained, and should be either commented as weak or declared with the __weak lifetime qualifier when applicable. Similarly, declared properties must specify an assign property attribute if they are not retained by the class. An exception is instance variables labeled as IBOutlets in desktop Mac software, which are presumed to not be retained.<br>Where instance variables are pointers to Core Foundation, C++, and other non-Objective-C objects, they should always be declared with strong and weak comments to indicate which pointers are and are not retained. Core Foundation and other non-Objective-C object pointers require explicit memory management, even when building for automatic reference counting or garbage collection.<br>Examples of strong and weak declarations:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyDelegate</span> : <span class="title">NSObject</span> </span>&#123;</div><div class="line"> <span class="keyword">@private</span></div><div class="line">  <span class="keyword">IBOutlet</span> <span class="built_in">NSButton</span> *_okButton;  <span class="comment">// Normal NSControl; implicitly weak on Mac only</span></div><div class="line"></div><div class="line">  AnObjcObject* _doohickey;  <span class="comment">// My doohickey</span></div><div class="line">  __<span class="keyword">weak</span> MyObjcParent *_parent;  <span class="comment">// So we can send msgs back (owns me)</span></div><div class="line"></div><div class="line">  <span class="comment">// non-NSObject pointers...</span></div><div class="line">  CWackyCPPClass *_wacky;  <span class="comment">// Strong, some cross-platform object</span></div><div class="line">  <span class="built_in">CFDictionaryRef</span> *_dict;  <span class="comment">// Strong</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">@property</span>(<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *doohickey;</div><div class="line"><span class="keyword">@property</span>(<span class="keyword">weak</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *parent;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h4 id="Automatic-Reference-Counting"><a href="#Automatic-Reference-Counting" class="headerlink" title="Automatic Reference Counting"></a>Automatic Reference Counting</h4><p>Object ownership and lifetime are explicit when using ARC, so no additional comments are required.</p>
<h2 id="Cocoa-and-Objective-C-Features"><a href="#Cocoa-and-Objective-C-Features" class="headerlink" title="Cocoa and Objective-C Features"></a>Cocoa and Objective-C Features</h2><h3 id="Instance-Variables-In-Headers-Should-Be-private"><a href="#Instance-Variables-In-Headers-Should-Be-private" class="headerlink" title="Instance Variables In Headers Should Be @private"></a>Instance Variables In Headers Should Be @private</h3><p>Instance variables should typically be declared in implementation files or auto-synthesized by properties. When ivars are declared in a header file, they should be marked <code>@private</code>.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyClass</span> : <span class="title">NSObject</span> </span>&#123;</div><div class="line"> <span class="keyword">@private</span></div><div class="line">  <span class="keyword">id</span> _myInstanceVariable;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h3 id="Identify-Designated-Initializer"><a href="#Identify-Designated-Initializer" class="headerlink" title="Identify Designated Initializer"></a>Identify Designated Initializer</h3><p>Comment and clearly identify your designated initializer.<br>It is important for those who might be subclassing your class that the designated initializer be clearly identified. That way, they only need to subclass a single initializer (of potentially several) to guarantee their subclass’ initializer is called. It also helps those debugging your class in the future understand the flow of initialization code if they need to step through it.</p>
<h3 id="Override-Designated-Initializer"><a href="#Override-Designated-Initializer" class="headerlink" title="Override Designated Initializer"></a>Override Designated Initializer</h3><p>When writing a subclass that requires an <code>init...</code> method, make sure you override the superclass’ designated initializer.<br>If you fail to override the superclass’ designated initializer, your initializer may not be called in all cases, leading to subtle and very difficult to find bugs.</p>
<h3 id="Overridden-NSObject-Method-Placement"><a href="#Overridden-NSObject-Method-Placement" class="headerlink" title="Overridden NSObject Method Placement"></a>Overridden NSObject Method Placement</h3><p>It is strongly recommended and typical practice to place overridden methods of <code>NSObject</code> at the top of an <code>@implementation</code>.<br>This commonly applies (but is not limited) to the <code>init...</code>, <code>copyWithZone:</code>, and <code>dealloc</code>methods. <code>init...</code> methods should be grouped together, followed by other <code>NSObject</code> methods.<br>Convenience class methods for creating instances may precede the NSObject methods.</p>
<h3 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h3><p>Don’t initialize variables to <code>0</code> or <code>nil</code> in the init method; it’s redundant.<br>All memory for a newly allocated object is initialized to 0 (except for <code>isa</code>), so don’t clutter up the <code>init</code> method by re-initializing variables to <code>0</code> or <code>nil</code>.</p>
<h3 id="Avoid-new"><a href="#Avoid-new" class="headerlink" title="Avoid +new"></a>Avoid +new</h3><p>Do not invoke the <code>NSObject</code> class method <code>new</code>, nor override it in a subclass. Instead, use <code>alloc</code> and <code>init</code> methods to instantiate retained objects.<br>Modern Objective-C code explicitly calls <code>alloc</code> and an <code>init</code> method to create and retain an object. As the <code>new</code>class method is rarely used, it makes reviewing code for correct memory management more difficult.</p>
<h3 id="Keep-the-Public-API-Simple"><a href="#Keep-the-Public-API-Simple" class="headerlink" title="Keep the Public API Simple"></a>Keep the Public API Simple</h3><p>Keep your class simple; avoid “kitchen-sink” APIs. If a method doesn’t need to be public, don’t make it so. Use a private category to prevent cluttering the public header.<br>Unlike C++, Objective-C doesn’t have a way to differentiate between public and private methods—everything is public. As a result, avoid placing methods in the public API unless they are actually expected to be used by a consumer of the class. This helps reduce the likelihood they’ll be called when you’re not expecting it. This includes methods that are being overridden from the parent class. For internal implementation methods, use a category defined in the implementation file as opposed to adding them to the public header.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"GTMFoo.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">GTMFoo</span> (<span class="title">PrivateDelegateHandling</span>)</span></div><div class="line">- (<span class="built_in">NSString</span> *)doSomethingWithDelegate;  <span class="comment">// Declare private method</span></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">GTMFoo</span> (<span class="title">PrivateDelegateHandling</span>)</span></div><div class="line">...</div><div class="line">- (<span class="built_in">NSString</span> *)doSomethingWithDelegate &#123;</div><div class="line">  <span class="comment">// Implement this method</span></div><div class="line">&#125;</div><div class="line">...</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p>If you are using Objective-C 2.0, you should instead declare your private category using a <a href="https://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/Articles/chapter_4_section_5.html#" target="_blank" rel="external">class extension</a>, for example:<br>    <code>@interface GMFoo () { ... }</code><br>which will guarantee that the declared methods are implemented in the <code>@implementation</code> section by issuing a compiler warning if they are not.<br>Again, “private” methods are not really private. You could accidentally override a superclass’s “private” method, thus making a very difficult bug to squash. In general, private methods should have a fairly unique name that will prevent subclasses from unintentionally overriding them.<br>Finally, Objective-C categories are a great way to segment a large <code>@implementation</code> section into more understandable chunks and to add new, application-specific functionality to the most appropriate class. For example, instead of adding “middle truncation” code to a random object in your app, make a new category on <code>NSString</code>).</p>
<h3 id="import-and-include"><a href="#import-and-include" class="headerlink" title="#import and #include"></a>#import and #include</h3><p>\#import Objective-C/Objective-C++ headers, and #include C/C++ headers.<br>Choose between #import and #include based on the language of the header that you are including.<br>• When including a header that uses Objective-C or Objective-C++, use #import.<br>• When including a standard C or C++ header, use #include. The header should provide its own #define guard.<br>Some Objective-C headers lack #define guards, and expect to be included only by #import. As Objective-C headers may only be included in Objective-C source files and other Objective-C headers, using #import across the board is appropriate.<br>Standard C and C++ headers without any Objective-C in them can expect to be included by ordinary C and C++ files. Since there is no #import in standard C or C++, such files will be included by #include in those cases. Using #include for them in Objective-C source files as well means that these headers will always be included with the same semantics.<br>This rule helps avoid inadvertent errors in cross-platform projects. A Mac developer introducing a new C or C++ header might forget to add #define guards, which would not cause problems on the Mac if the new header were included with #import, but would break builds on other platforms where #include is used. Being consistent by using #include on all platforms means that compilation is more likely to succeed everywhere or fail everywhere, and avoids the frustration of files working only on some platforms.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;Cocoa/Cocoa.h&gt;</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">&lt;CoreFoundation/CoreFoundation.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"GTMFoo.h"</span></span></div><div class="line"><span class="meta">#include <span class="meta-string">"base/basictypes.h"</span></span></div></pre></td></tr></table></figure></p>
<h3 id="Use-Root-Frameworks"><a href="#Use-Root-Frameworks" class="headerlink" title="Use Root Frameworks"></a>Use Root Frameworks</h3><p>Include root frameworks over individual files.<br>While it may seem tempting to include individual system headers from a framework such as Cocoa or Foundation, in fact it’s less work on the compiler if you include the top-level root framework. The root framework is generally pre-compiled and can be loaded much more quickly. In addition, remember to use <code>#import</code> rather than <code>#include</code> for Objective-C frameworks.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span>     // good</span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/NSArray.h&gt;</span>        // avoid</span></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/NSString.h&gt;</span></span></div><div class="line">...</div></pre></td></tr></table></figure></p>
<h3 id="Prefer-To-autorelease-At-Time-of-Creation"><a href="#Prefer-To-autorelease-At-Time-of-Creation" class="headerlink" title="Prefer To autorelease At Time of Creation"></a>Prefer To autorelease At Time of Creation</h3><p>When creating new temporary objects, <code>autorelease</code> them on the same line as you create them rather than a separate release later in the same method.<br>While ever so slightly slower, this prevents someone from accidentally removing the <code>release</code> or inserting a <code>return</code> before it and introducing a memory leak. E.g.:<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// AVOID (unless you have a compelling performance reason)</span></div><div class="line">MyController* controller = [[MyController alloc] init];</div><div class="line"><span class="comment">// ... code here that might return ...</span></div><div class="line">[controller release];</div><div class="line"></div><div class="line"><span class="comment">// BETTER</span></div><div class="line">MyController* controller = [[[MyController alloc] init] autorelease];</div></pre></td></tr></table></figure></p>
<h3 id="Autorelease-Then-Retain"><a href="#Autorelease-Then-Retain" class="headerlink" title="Autorelease Then Retain"></a>Autorelease Then Retain</h3><p>Assignment of objects follows the <code>autorelease</code> then <code>retain</code> pattern.<br>When assigning a new object to a variable, one must first release the old object to avoid a memory leak. There are several “correct” ways to handle this. We’ve chosen the “autorelease then retain” approach because it’s less prone to error. Be aware in tight loops it can fill up the autorelease pool, and may be slightly less efficient, but we feel the tradeoffs are acceptable.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setFoo:(GMFoo *)aFoo &#123;</div><div class="line">  [_foo autorelease];  <span class="comment">// Won't dealloc if |_foo| == |aFoo|</span></div><div class="line">  _foo = [aFoo <span class="keyword">retain</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Avoid-Accessors-During-init-and-dealloc"><a href="#Avoid-Accessors-During-init-and-dealloc" class="headerlink" title="Avoid Accessors During init and dealloc"></a>Avoid Accessors During init and dealloc</h3><p>Instance subclasses may be in an inconsistent state during <code>init</code> and <code>dealloc</code> method execution, so code in those methods should avoid invoking accessors.<br>Subclasses have not yet been initialized or have already deallocated when <code>init</code> and <code>dealloc</code> methods execute, making accessor methods potentially unreliable. Whenever practical, directly assign to and release ivars in those methods rather than rely on accessors.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">instancetype</span>)init &#123;</div><div class="line">  <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</div><div class="line">    _bar = [[<span class="built_in">NSMutableString</span> alloc] init];  <span class="comment">// good</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)dealloc &#123;</div><div class="line">  [_bar release];                           <span class="comment">// good</span></div><div class="line">  [<span class="keyword">super</span> dealloc];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">instancetype</span>)init &#123;</div><div class="line">  <span class="keyword">self</span> = [<span class="keyword">super</span> init];</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</div><div class="line">    <span class="keyword">self</span>.bar = [<span class="built_in">NSMutableString</span> string];  <span class="comment">// avoid</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">self</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)dealloc &#123;</div><div class="line">  <span class="keyword">self</span>.bar = <span class="literal">nil</span>;                         <span class="comment">// avoid</span></div><div class="line">  [<span class="keyword">super</span> dealloc];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Dealloc-Instance-Variables-in-Declaration-Order"><a href="#Dealloc-Instance-Variables-in-Declaration-Order" class="headerlink" title="Dealloc Instance Variables in Declaration Order"></a>Dealloc Instance Variables in Declaration Order</h3><p><code>dealloc</code> should process instance variables in the same order the <code>@interface</code> declares them, so it is easier for a reviewer to verify.<br>A code reviewer checking a new or revised <code>dealloc</code> implementation needs to make sure that every retained instance variable gets released.<br>To simplify reviewing <code>dealloc</code>, order the code so that the retained instance variables get released in the same order that they are declared in the <code>@interface</code>. If <code>dealloc</code> invokes other methods that release instance variables, add comments describing what instance variables those methods handle.</p>
<h3 id="Setters-copy-NSStrings"><a href="#Setters-copy-NSStrings" class="headerlink" title="Setters copy NSStrings"></a>Setters copy NSStrings</h3><p>Setters taking an <code>NSString</code>, should always copy the string it accepts.<br>Never just <code>retain</code> the string. This avoids the caller changing it under you without your knowledge. Don’t assume that because you’re accepting an <code>NSString</code> that it’s not actually an<code>NSMutableString</code>.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)setFoo:(<span class="built_in">NSString</span> *)aFoo &#123;</div><div class="line">  [_foo autorelease];</div><div class="line">  _foo = [aFoo <span class="keyword">copy</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Avoid-Throwing-Exceptions"><a href="#Avoid-Throwing-Exceptions" class="headerlink" title="Avoid Throwing Exceptions"></a>Avoid Throwing Exceptions</h3><p>Don’t <code>@throw</code> Objective-C exceptions, but you should be prepared to catch them from third-party or OS calls.<br>We do compile with <code>-fobjc-exceptions</code> (mainly so we get <code>@synchronized</code>), but we don’t <code>@throw</code>. Use of <code>@try</code>, <code>@catch</code>, and <code>@finally</code> are allowed when required to properly use 3rd party code or libraries. If you do use them please document exactly which methods you expect to throw.</p>
<h3 id="nil-Checks"><a href="#nil-Checks" class="headerlink" title="nil Checks"></a>nil Checks</h3><p>Use <code>nil</code> checks for logic flow only.<br>Use nil pointer checks for logic flow of the application, not for preventing crashes when sending messages. With current compilers ( <a href="http://www.sealiesoftware.com/blog/archive/2012/2/29/objc_explain_return_value_of_message_to_nil.html" target="_blank" rel="external">as of LLVM 3.0/Xcode 4.2</a>), sending a message to nil reliably returns nil as a pointer, zero as an integer or floating-point value, structs initialized to 0, and <code>_Complex</code> values equal to 0, 0.<br>Note that this applies to <code>nil</code> as a message target, not as a parameter value. Individual methods may or may not safely handle nil parameter values.<br>Note too that this is distinct from checking C/C++ pointers and block pointers against <code>NULL</code>, which the runtime does not handle and will cause your application to crash. You still need to make sure you do not dereference a <code>NULL</code> pointer.</p>
<h3 id="BOOL-Pitfalls"><a href="#BOOL-Pitfalls" class="headerlink" title="BOOL Pitfalls"></a>BOOL Pitfalls</h3><p>Be careful when converting general integral values to <code>BOOL</code>. Avoid comparing directly with YES.<br><code>BOOL</code> is defined as a signed char in Objective-C which means that it can have values other than <code>YES</code> (1) and <code>NO</code> (0). Do not cast or convert general integral values directly to <code>BOOL</code>. Common mistakes include casting or converting an array’s size, a pointer value, or the result of a bitwise logic operation to a <code>BOOL</code> which, depending on the value of the last byte of the integral result, could still result in a <code>NO</code> value. When converting a general integral value to a <code>BOOL</code> use ternary operators to return a <code>YES</code> or <code>NO</code> value.<br>You can safely interchange and convert <code>BOOL</code>, <code>_Bool</code> and <code>bool</code> (see C++ Std 4.7.4, 4.12 and C99 Std 6.3.1.2). You cannot safely interchange <code>BOOL</code> and <code>Boolean</code> so treat <code>Booleans</code> as a general integral value as discussed above. Only use <code>BOOL</code> in <code>Objective C</code> method signatures.<br>Using logical operators (&amp;&amp;, || and !) with <code>BOOL</code> is also valid and will return values that can be safely converted to <code>BOOL</code> without the need for a ternary operator.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//avoid</span></div><div class="line">- (<span class="built_in">BOOL</span>)isBold &#123;</div><div class="line">  <span class="keyword">return</span> [<span class="keyword">self</span> fontTraits] &amp; <span class="built_in">NSFontBoldTrait</span>;</div><div class="line">&#125;</div><div class="line">- (<span class="built_in">BOOL</span>)isValid &#123;</div><div class="line">  <span class="keyword">return</span> [<span class="keyword">self</span> stringValue];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//good</span></div><div class="line">- (<span class="built_in">BOOL</span>)isBold &#123;</div><div class="line">  <span class="keyword">return</span> ([<span class="keyword">self</span> fontTraits] &amp; <span class="built_in">NSFontBoldTrait</span>) ? <span class="literal">YES</span> : <span class="literal">NO</span>;</div><div class="line">&#125;</div><div class="line">- (<span class="built_in">BOOL</span>)isValid &#123;</div><div class="line">  <span class="keyword">return</span> [<span class="keyword">self</span> stringValue] != <span class="literal">nil</span>;</div><div class="line">&#125;</div><div class="line">- (<span class="built_in">BOOL</span>)isEnabled &#123;</div><div class="line">  <span class="keyword">return</span> [<span class="keyword">self</span> isValid] &amp;&amp; [<span class="keyword">self</span> isBold];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Also, don’t directly compare <code>BOOL</code> variables directly with <code>YES</code>. Not only is it harder to read for those well-versed in C, the first point above demonstrates that return values may not always be what you expect.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//avoid</span></div><div class="line"><span class="built_in">BOOL</span> great = [foo isGreat];</div><div class="line"><span class="keyword">if</span> (great == <span class="literal">YES</span>)</div><div class="line">  <span class="comment">// ...be great!</span></div><div class="line"></div><div class="line"><span class="comment">//good</span></div><div class="line"><span class="built_in">BOOL</span> great = [foo isGreat];</div><div class="line"><span class="keyword">if</span> (great)</div><div class="line">  <span class="comment">// ...be great!</span></div></pre></td></tr></table></figure></p>
<h3 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3><p>Use of the @property directive is preferred, with the following caveat: properties are an Objective-C 2.0 feature which will limit your code to running on the iPhone and Mac OS X 10.5 (Leopard) and higher. Dot notation is allowed only for access to a declared <code>@property</code>.</p>
<h4 id="Naming-1"><a href="#Naming-1" class="headerlink" title="Naming"></a>Naming</h4><p>A property’s associated instance variable’s name must conform to the leading _ requirement. The property’s name should be the same as its associated instance variable without the leading _. The optional space between the @property and the opening parenthesis should be omitted, as seen in the examples.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyClass</span> : <span class="title">NSObject</span></span></div><div class="line"><span class="keyword">@property</span>(<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *name;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MyClass</span></span></div><div class="line"><span class="comment">// No code required for auto-synthesis, else use:</span></div><div class="line"><span class="comment">//   @synthesize name = _name;</span></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h4 id="Location"><a href="#Location" class="headerlink" title="Location"></a>Location</h4><p>A property’s declaration must come immediately after the instance variable block of a class interface. A property’s definition (if not using automatic synthesis) must come immediately after the <code>@implementation</code> block in a class definition. They are indented at the same level as the <code>@interface</code> or <code>@implementation</code> statements that they are enclosed in.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyClass</span> : <span class="title">NSObject</span> </span>&#123;</div><div class="line"> <span class="keyword">@private</span></div><div class="line">  <span class="built_in">NSString</span> *_name;</div><div class="line">&#125;</div><div class="line"><span class="keyword">@property</span>(<span class="keyword">copy</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *name;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MyClass</span></span></div><div class="line"><span class="keyword">@synthesize</span> name = _name;</div><div class="line"></div><div class="line">- (<span class="keyword">instancetype</span>)init &#123;</div><div class="line">  ...</div><div class="line">&#125;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h4 id="Use-Copy-Attribute-For-Strings"><a href="#Use-Copy-Attribute-For-Strings" class="headerlink" title="Use Copy Attribute For Strings"></a>Use Copy Attribute For Strings</h4><p>NSString properties should always be declared with the <code>copy</code> attribute.<br>This logically follows from the requirement that setters for NSStrings always must use <code>copy</code> instead of <code>retain</code>.</p>
<h4 id="Atomicity"><a href="#Atomicity" class="headerlink" title="Atomicity"></a>Atomicity</h4><p>Be aware of the overhead of properties. By default, all synthesized setters and getters are atomic. This gives each set and get calls a substantial amount of synchronization overhead. Declare your properties <code>nonatomic</code> unless you require atomicity.</p>
<h4 id="Dot-notation"><a href="#Dot-notation" class="headerlink" title="Dot notation"></a>Dot notation</h4><p>Dot notation is idiomatic style for Objective-C 2.0. It may be used when doing simple operations to get and set a <code>@property</code> of an object, but should not be used to invoke other object behavior.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span> *oldName = myObject.name;</div><div class="line">myObject.name = <span class="string">@"Alice"</span>;</div><div class="line"></div><div class="line"><span class="comment">//avoid</span></div><div class="line"><span class="built_in">NSArray</span> *array = [[<span class="built_in">NSArray</span> arrayWithObject:<span class="string">@"hello"</span>] <span class="keyword">retain</span>];</div><div class="line"></div><div class="line"><span class="built_in">NSUInteger</span> numberOfItems = array.count;  <span class="comment">// not a property</span></div><div class="line">array.release;                           <span class="comment">// not a property</span></div></pre></td></tr></table></figure></p>
<h3 id="Interfaces-Without-Instance-Variables"><a href="#Interfaces-Without-Instance-Variables" class="headerlink" title="Interfaces Without Instance Variables"></a>Interfaces Without Instance Variables</h3><p>Omit the empty set of braces on interfaces that do not declare any instance variables.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MyClass</span> : <span class="title">NSObject</span></span></div><div class="line">.     <span class="comment">// Does a lot of stuff</span></div><div class="line">     - (<span class="keyword">void</span>)fooBarBam;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h3 id="Automatically-Synthesized-Instance-Variables"><a href="#Automatically-Synthesized-Instance-Variables" class="headerlink" title="Automatically Synthesized Instance Variables"></a>Automatically Synthesized Instance Variables</h3><p>Use of automatically synthesized instance variables is preferred. Code that must support earlier versions of the compiler toolchain (Xcode 4.3 or earlier or when compiling with GCC) or is using properties inherited from a protocol should prefer the @synthesize directive.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Header file</span></div><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">Thingy</span></span></div><div class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *widgetName;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Foo</span> : <span class="title">NSObject</span>&lt;<span class="title">Thingy</span>&gt;</span></div><div class="line"><span class="comment">// A guy walks into a bar.</span></div><div class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *bar;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="comment">// Implementation file</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Foo</span> ()</span></div><div class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>, <span class="keyword">retain</span>) <span class="built_in">NSArray</span> *baz;</div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Foo</span></span></div><div class="line"><span class="keyword">@synthesize</span> widgetName = _widgetName;</div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p>Automatically synthesized instance variables take the form of the property’s name prefixed with an underscore and so typically conform to the required variable naming style. If your property name is unusual, or you are otherwise unable to use automatically synthesized instance variables, use of the @synthesize directive is preferred, with the instance variable name specified explicitly (as @synthesize does not add a leading underscore by default).</p>
<h3 id="Automatic-Reference-Counting-ARC"><a href="#Automatic-Reference-Counting-ARC" class="headerlink" title="Automatic Reference Counting (ARC)"></a>Automatic Reference Counting (ARC)</h3><p>For projects that use Xcode 4.2 or later and will run only on 64-bit Mac OS X 10.7 and iOS 5.0 and later, ARC is preferred. Use manual reference counting when supporting earlier environments where zeroing weak pointers are not available.<br>Classes that require ARC should include a preprocessor directive to prevent compilation using manual reference counting.<br>Ownership qualifiers like <code>__unsafe_unretained</code> and <code>__weak</code> should precede variable names. Specifying <code>__strong</code> for variables is not required since it is the default. Properties, on the other hand, should always specify the strong keyword rather than relying on the compiler default.<br>Files that are compiled using ARC need to have preprocessor directives to prevent compilation without ARC. See the code snippet below for details.<br>Example of an implementation file enforcing ARC style. Note that declaring instance variables in the @implementation is permitted when using ARC.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#if !defined(__has_feature) || !__has_feature(objc_arc)</span></div><div class="line"><span class="meta">#error <span class="meta-string">"This file requires ARC support."</span></span></div><div class="line"><span class="meta">#endif</span></div><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">"Foo.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Foo</span> </span>&#123;</div><div class="line">  Bar* __<span class="keyword">weak</span> _bar;</div><div class="line">  Baz* __<span class="keyword">unsafe_unretained</span> _baz;</div><div class="line">&#125;</div><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h3 id="NSNumber-Literals"><a href="#NSNumber-Literals" class="headerlink" title="NSNumber Literals"></a>NSNumber Literals</h3><p>For projects that use Xcode 4.4 or later with clang, the use of <a href="http://clang.llvm.org/docs/ObjectiveCLiterals.html" target="_blank" rel="external">NSNumber literals</a> is allowed. Note however that this will limit the portability of your code to other toolchains.<br>NSNumber literals are used just like Objective C string literals. Boxing is used when necessary. Code using NSNumber literals can be deployed on any iOS/MacOS system.<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSNumber</span> *fortyTwo = @<span class="number">42</span>;</div><div class="line"><span class="built_in">NSNumber</span> *piOverTwo = @(M_PI / <span class="number">2</span>);</div><div class="line"><span class="keyword">enum</span> &#123;</div><div class="line">  kMyEnum = <span class="number">2</span>;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">NSNumber</span> *myEnum = @(kMyEnum);</div></pre></td></tr></table></figure></p>
<h2 id="Cocoa-Patterns"><a href="#Cocoa-Patterns" class="headerlink" title="Cocoa Patterns"></a>Cocoa Patterns</h2><h3 id="Delegate-Pattern"><a href="#Delegate-Pattern" class="headerlink" title="Delegate Pattern"></a>Delegate Pattern</h3><p>Delegate objects should not be retained when doing so would create a retain cycle.<br>A class that implements the delegate pattern should typically:</p>
<ol>
<li>Have an instance variable named <code>_delegate</code> to reference the delegate.</li>
<li>Thus, the accessor methods should be named <code>delegate</code> and setDelegate:.</li>
<li>The <code>_delegate</code> object should be weak if the class is typically retained by its delegate, such that a strong delegate would create a retain cycle.<h3 id="Model-View-Controller"><a href="#Model-View-Controller" class="headerlink" title="Model/View/Controller"></a>Model/View/Controller</h3>Separate the model from the view. Separate the controller from the view and the model. Use <code>@protocols</code> for callback APIs.</li>
</ol>
<ul>
<li>Separate model from view: don’t build assumptions about the presentation into the model or data source. Keep the interface between the data source and the presentation abstract. Don’t give the model knowledge of its view. (A good rule of thumb is to ask yourself if it’s possible to have multiple presentations, with different states, on a single instance of your data source.)</li>
<li>Separate controller from view and model: don’t put all of the “business logic” into view-related classes; this makes the code very unusable. Make controller classes to host this code, but ensure that the controller classes don’t make too many assumptions about the presentation.</li>
<li>Define callback APIs with <code>@protocol</code>, using <code>@optional</code> if not all the methods are required.<h2 id="Historical-Notes"><a href="#Historical-Notes" class="headerlink" title="Historical Notes"></a>Historical Notes</h2><h3 id="Trailing-vs-Leading-Underscores"><a href="#Trailing-vs-Leading-Underscores" class="headerlink" title="Trailing vs Leading Underscores"></a>Trailing vs Leading Underscores</h3>Trailing underscores were once preferred for instance variable names.<br>Our style guide used to have a rule saying that instance variables should be named with a trailing underscore, similar to the naming of member variables in C++. This was changed to leading underscores to be consistent with the broader Objective-C community, to better follow Apple’s official guidelines, and to allow for use of new compiler features like automatic instance variable synthesis. New projects are strongly encouraged to use leading underscores. Existing projects may continue to use trailing underscores in new code to maintain consistency with the rest of their codebase.</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Objective-C/" rel="tag"># Objective-C</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/04/08/2017-04-08-swift-style-guide/" rel="next" title="swift style guide">
                <i class="fa fa-chevron-left"></i> swift style guide
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        
<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpeg"
               alt="Guangfeng Wang" />
          <p class="site-author-name" itemprop="name">Guangfeng Wang</p>
           
              <p class="site-description motion-element" itemprop="description">The only way of finding the limits of the possible is by going beyond them into the impossible</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/kwongfung" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/Guangfeng" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/112700656" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/users/6f4d9b8a3650" target="_blank" title="Jianshu">
                  
                    <i class="fa fa-fw fa-link"></i>
                  
                  Jianshu
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://iissnan.com/progit/" title="Pro Git" target="_blank">Pro Git</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Background"><span class="nav-number">1.</span> <span class="nav-text">Background</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example"><span class="nav-number">2.</span> <span class="nav-text">Example</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spacing-And-Formatting"><span class="nav-number">3.</span> <span class="nav-text">Spacing And Formatting</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Spaces-vs-Tabs"><span class="nav-number">3.1.</span> <span class="nav-text">Spaces vs. Tabs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Line-Length"><span class="nav-number">3.2.</span> <span class="nav-text">Line Length</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Method-Declarations-and-Definitions"><span class="nav-number">3.3.</span> <span class="nav-text">Method Declarations and Definitions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Method-Invocations"><span class="nav-number">3.4.</span> <span class="nav-text">Method Invocations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#public-and-private"><span class="nav-number">3.5.</span> <span class="nav-text">@public and @private</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Exceptions"><span class="nav-number">3.6.</span> <span class="nav-text">Exceptions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Protocols"><span class="nav-number">3.7.</span> <span class="nav-text">Protocols</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Blocks"><span class="nav-number">3.8.</span> <span class="nav-text">Blocks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Container-Literals"><span class="nav-number">3.9.</span> <span class="nav-text">Container Literals</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Naming"><span class="nav-number">4.</span> <span class="nav-text">Naming</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#File-Names"><span class="nav-number">4.1.</span> <span class="nav-text">File Names</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Objective-C"><span class="nav-number">4.2.</span> <span class="nav-text">Objective-C++</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Class-Names"><span class="nav-number">4.3.</span> <span class="nav-text">Class Names</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Category-Names"><span class="nav-number">4.4.</span> <span class="nav-text">Category Names</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Objective-C-Method-Names"><span class="nav-number">4.5.</span> <span class="nav-text">Objective-C Method Names</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Variable-Names"><span class="nav-number">4.6.</span> <span class="nav-text">Variable Names</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Common-Variable-Names"><span class="nav-number">4.6.1.</span> <span class="nav-text">Common Variable Names</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Instance-Variables"><span class="nav-number">4.6.2.</span> <span class="nav-text">Instance Variables</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Constants"><span class="nav-number">4.6.3.</span> <span class="nav-text">Constants</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Comments"><span class="nav-number">5.</span> <span class="nav-text">Comments</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#File-Comments"><span class="nav-number">5.1.</span> <span class="nav-text">File Comments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Declaration-Comments"><span class="nav-number">5.2.</span> <span class="nav-text">Declaration Comments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Implementation-Comments"><span class="nav-number">5.3.</span> <span class="nav-text">Implementation Comments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Object-Ownership"><span class="nav-number">5.4.</span> <span class="nav-text">Object Ownership</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Manual-Reference-Counting"><span class="nav-number">5.4.1.</span> <span class="nav-text">Manual Reference Counting</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Automatic-Reference-Counting"><span class="nav-number">5.4.2.</span> <span class="nav-text">Automatic Reference Counting</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cocoa-and-Objective-C-Features"><span class="nav-number">6.</span> <span class="nav-text">Cocoa and Objective-C Features</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Instance-Variables-In-Headers-Should-Be-private"><span class="nav-number">6.1.</span> <span class="nav-text">Instance Variables In Headers Should Be @private</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Identify-Designated-Initializer"><span class="nav-number">6.2.</span> <span class="nav-text">Identify Designated Initializer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Override-Designated-Initializer"><span class="nav-number">6.3.</span> <span class="nav-text">Override Designated Initializer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Overridden-NSObject-Method-Placement"><span class="nav-number">6.4.</span> <span class="nav-text">Overridden NSObject Method Placement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Initialization"><span class="nav-number">6.5.</span> <span class="nav-text">Initialization</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Avoid-new"><span class="nav-number">6.6.</span> <span class="nav-text">Avoid +new</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Keep-the-Public-API-Simple"><span class="nav-number">6.7.</span> <span class="nav-text">Keep the Public API Simple</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#import-and-include"><span class="nav-number">6.8.</span> <span class="nav-text">#import and #include</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Root-Frameworks"><span class="nav-number">6.9.</span> <span class="nav-text">Use Root Frameworks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Prefer-To-autorelease-At-Time-of-Creation"><span class="nav-number">6.10.</span> <span class="nav-text">Prefer To autorelease At Time of Creation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Autorelease-Then-Retain"><span class="nav-number">6.11.</span> <span class="nav-text">Autorelease Then Retain</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Avoid-Accessors-During-init-and-dealloc"><span class="nav-number">6.12.</span> <span class="nav-text">Avoid Accessors During init and dealloc</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dealloc-Instance-Variables-in-Declaration-Order"><span class="nav-number">6.13.</span> <span class="nav-text">Dealloc Instance Variables in Declaration Order</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Setters-copy-NSStrings"><span class="nav-number">6.14.</span> <span class="nav-text">Setters copy NSStrings</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Avoid-Throwing-Exceptions"><span class="nav-number">6.15.</span> <span class="nav-text">Avoid Throwing Exceptions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nil-Checks"><span class="nav-number">6.16.</span> <span class="nav-text">nil Checks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BOOL-Pitfalls"><span class="nav-number">6.17.</span> <span class="nav-text">BOOL Pitfalls</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Properties"><span class="nav-number">6.18.</span> <span class="nav-text">Properties</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Naming-1"><span class="nav-number">6.18.1.</span> <span class="nav-text">Naming</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Location"><span class="nav-number">6.18.2.</span> <span class="nav-text">Location</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Use-Copy-Attribute-For-Strings"><span class="nav-number">6.18.3.</span> <span class="nav-text">Use Copy Attribute For Strings</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Atomicity"><span class="nav-number">6.18.4.</span> <span class="nav-text">Atomicity</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Dot-notation"><span class="nav-number">6.18.5.</span> <span class="nav-text">Dot notation</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Interfaces-Without-Instance-Variables"><span class="nav-number">6.19.</span> <span class="nav-text">Interfaces Without Instance Variables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Automatically-Synthesized-Instance-Variables"><span class="nav-number">6.20.</span> <span class="nav-text">Automatically Synthesized Instance Variables</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Automatic-Reference-Counting-ARC"><span class="nav-number">6.21.</span> <span class="nav-text">Automatic Reference Counting (ARC)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NSNumber-Literals"><span class="nav-number">6.22.</span> <span class="nav-text">NSNumber Literals</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cocoa-Patterns"><span class="nav-number">7.</span> <span class="nav-text">Cocoa Patterns</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Delegate-Pattern"><span class="nav-number">7.1.</span> <span class="nav-text">Delegate Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Model-View-Controller"><span class="nav-number">7.2.</span> <span class="nav-text">Model/View/Controller</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Historical-Notes"><span class="nav-number">8.</span> <span class="nav-text">Historical Notes</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Trailing-vs-Leading-Underscores"><span class="nav-number">8.1.</span> <span class="nav-text">Trailing vs Leading Underscores</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Guangfeng Wang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
    <span class="site-pv">
      本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>





  

  

  

  

</body>
</html>
